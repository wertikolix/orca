# FhMd 0.1.0-alpha08 (draft)

Release focus: renderer stability/performance fixes shipped as an explicit follow-up release.

## Highlights

- Parsing moved off the main thread in Compose renderer:
  - `produceState` + `Dispatchers.Default` for markdown parsing
- Root renderer switched to `LazyColumn` for long-document behavior.
- Style model decomposed into grouped sections:
  - `typography`, `inline`, `layout`, `quote`, `code`, `table`, `thematicBreak`, `image`
  - flat compatibility accessors are preserved for v0.1 API stability
- Sample app updated to use `FhMd` scrolling (removed extra outer `verticalScroll`).
- Previous hardening retained:
  - parser depth limit `MAX_TREE_DEPTH = 64`
  - parser `cacheKey()` support
  - short alias publication `ru.wertik:fhmd-compose` in addition to `ru.wertik:fhmd-compose-android`

## Supported

- Parser backend: `commonmark-java` (`0.27.1`)
- Extensions:
  - `commonmark-ext-gfm-tables`
  - `commonmark-ext-gfm-strikethrough`
  - `commonmark-ext-task-list-items`
- Public parser API:
  - `interface FhMdParser { fun parse(input: String): FhMdDocument }`
- Blocks:
  - heading
  - paragraph
  - bullet list / ordered list (with ordered start number)
  - quote
  - fenced code block / indented code block
  - image (standalone markdown image line)
  - thematic break (`---`)
  - table
- Inlines:
  - text
  - bold
  - italic
  - strikethrough
  - inline code
  - link
  - image AST (inside text flow rendered as fallback text)
  - soft/hard line breaks
- Compose renderer:
  - `FhMd(markdown = ...)`
  - `FhMd(document = ...)`
  - `onLinkClick` callback
  - image rendering via Coil 3
  - baseline styling via `FhMdStyle`

## Not Supported Yet

- HTML blocks/inline HTML
- footnotes/front matter/extensions beyond current set
- task list interactivity (render-only markers in v0.1)
- non-Android targets (multiplatform-ready architecture only)

## Verification

```bash
./gradlew --no-daemon --build-cache :fhmd-core:test :fhmd-compose-android:testDebugUnitTest :sample-app:assembleDebug :sample-app:assembleRelease :sample-app:bundleRelease
```
