# 0.7.4

Stability and refactoring release.

## Fixed

- **`parseCached` silent exception swallowing** — `OrcaMarkdownParser.parseCached` had a `try/catch` that returned `OrcaDocument(emptyList())` on any exception, discarding the error completely. Now delegates to `parseCachedWithDiagnostics` which handles errors via `OrcaParseError.ParserFailure`.

## Changed

- **Extract shared HTML utils to `OrcaHtmlUtils`** — `decodeBasicHtmlEntities`, `HTML_TAG_REGEX`, `BR_TAG_REGEX`, `BLOCK_BREAK_TAG_REGEX` were duplicated in `OrcaInlineText.kt` and `OrcaBlockNode.kt`. Extracted to new `OrcaHtmlUtils.kt`, both files now use shared versions.
- **Remove redundant `mergeAdjacentText` call** — raw inline list was merged before `processFootnoteSyntax`, then merged again after. First merge was redundant since `processFootnoteSyntax` rebuilds text nodes from scratch.
- **Improve list block render key collision resistance** — `OrcaBlock.ListBlock` key was `"List:ol:2"` — two different lists with same item count got same key. Now includes first item content digest.
- **Improve quote, table, footnotes block keys** — same collision problem for `Quote` (size only), `Table` (header/row count only), `Footnotes` (definition count only). All now include first-element content digest.

## Files changed

- `orca-compose/src/commonMain/.../OrcaHtmlUtils.kt` (new)
- `orca-compose/src/commonMain/.../OrcaInlineText.kt`
- `orca-compose/src/commonMain/.../OrcaBlockNode.kt`
- `orca-compose/src/commonMain/.../Orca.kt`
- `orca-core/src/commonMain/.../OrcaMarkdownParser.kt`
- `orca-core/src/commonMain/.../IntellijMarkdownTreeMapper.kt`

## Upgrade

```kotlin
implementation("ru.wertik:orca-core:0.7.4")
implementation("ru.wertik:orca-compose:0.7.4")
```

No API changes. Drop-in replacement for 0.7.3.
